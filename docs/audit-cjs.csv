file,line,pattern,snippet
"src\builderbot_poc.js",3,"require(","const { createBot, createProvider, createFlow, addKeyword, MemoryDB, BaileysProvider } = require('@builderbot/bot');"
"src\bulk\bulkMessageManager.js",1,"require(","const ExcelReader = require(""./excelReader"");"
"src\bulk\bulkMessageManager.js",2,"require(","const ExcelUpdater = require(""./excelUpdater"");"
"src\bulk\bulkMessageManager.js",3,"require(","const MessageFormatter = require(""./messageFormatter"");"
"src\bulk\bulkMessageManager.js",4,"require(","const MessageSender = require(""./messageSender"");"
"src\bulk\bulkMessageManager.js",5,"require(","const ReportSender = require(""./reportSender"");"
"src\bulk\bulkMessageManager.js",6,"require(","const MessageData = require(""../../src/utils/MessageData"");"
"src\bulk\bulkMessageManager.js",9,"require(","} = require(""../../src/config/botConfigManager"");"
"src\bulk\bulkMessageManager.js",10,"require(","const { getUserConfig } = require(""../../src/config/userConfig""); // Assuming userConfig exists"
"src\bulk\bulkMessageManager.js",14,"require(","} = require(""../../src/utils/getBulkMessageStats""); // Assuming stats tracking exists"
"src\bulk\bulkMessageManager.js",15,"require(","const { logMessage } = require(""../utils/messageLogger""); // Adjust the path as needed"
"src\bulk\bulkMessageManager.js",16,"require(","const getMessageHistory = require(""../utils/chatHistoryAggregator"");"
"src\bulk\bulkMessageManager.js",17,"require(","const N8nWebhookListener = require(""../Logica/N8nWebhookListener"");"
"src\bulk\bulkMessageManager.js",18,"require(","//const { getOrCreateThread, addContextAssistant } = require('../Assistant'); // Assuming Assistant functions are needed"
"src\bulk\bulkMessageManager.js",19,"require(","const HorarioManagerService = require(""../services/HorarioManagerService"");"
"src\bulk\bulkMessageManager.js",297,"module.exports","module.exports = BulkMessageManager;"
"src\bulk\enviarMensajesMasivos.js",1,"require(","const BulkMessageManager = require('./bulkMessageManager');"
"src\bulk\enviarMensajesMasivos.js",2,"require(","const { getBotFilePath } = require('../src/utils/botFileMapping'); // Use the new function to get path from config"
"src\bulk\enviarMensajesMasivos.js",26,"module.exports","module.exports = enviarMensajesMasivos;"
"src\bulk\excelReader.js",1,"require(","const XLSX = require('xlsx');"
"src\bulk\excelReader.js",2,"require(","const fs = require('fs');"
"src\bulk\excelReader.js",3,"require(","const path = require('path');"
"src\bulk\excelReader.js",92,"module.exports","module.exports = ExcelReader;"
"src\bulk\excelUpdater.js",1,"require(","const XLSX = require('xlsx');"
"src\bulk\excelUpdater.js",23,"module.exports","module.exports = ExcelUpdater;"
"src\bulk\messageFormatter.js",1,"require(","//const OllamaFunnelClassifier = require('../OllamaFunnelClassifier');"
"src\bulk\messageFormatter.js",2,"require(","const N8nWebhookListener = require('../../src/Logica/N8nWebhookListener');"
"src\bulk\messageFormatter.js",3,"require(","const { getInstance: getBotConfigManager } = require('../../src/config/botConfigManager');"
"src\bulk\messageFormatter.js",53,"module.exports","module.exports = MessageFormatter;"
"src\bulk\messageSender.js",1,"require(","const fs = require(""fs"");"
"src\bulk\messageSender.js",2,"require(","const path = require(""path"");"
"src\bulk\messageSender.js",137,"module.exports","module.exports = MessageSender;"
"src\bulk\MessageStatusChecker.js",1,"require(","const DatabaseQueries = require(""../database/DatabaseQueries"");"
"src\bulk\MessageStatusChecker.js",2,"require(","const SqliteManager = require(""../database/SqliteManager"");"
"src\bulk\MessageStatusChecker.js",94,"require(","const { getMensajesBulkEsteMes } = require(""../database/scripts/getMensajesBulkEsteMes"");"
"src\bulk\MessageStatusChecker.js",163,"module.exports","module.exports = MessageStatusChecker; // Use `module.exports`, not `exports`"
"src\bulk\reportSender.js",1,"require(","const { getAdmin } = require('../../src/utils/isAdmin');"
"src\bulk\reportSender.js",39,"module.exports","module.exports = ReportSender;"
"src\bulk\sendBulkMessages.js",1,"require(","const BulkMessageManager = require('./bulk/bulkMessageManager');"
"src\bulk\sendBulkMessages.js",2,"require(","const { getBotFilePath } = require('../src/utils/botFileMapping'); // Use the new function to get path from config"
"src\bulk\sendBulkMessages.js",26,"module.exports","module.exports = sendBulkMessages;"
"src\config\botConfigManager.js",1,"require(","const XLSX = require(""xlsx"");"
"src\config\botConfigManager.js",2,"require(","const path = require(""path"");"
"src\config\botConfigManager.js",3,"require(","const fs = require(""fs"");"
"src\config\botConfigManager.js",412,"module.exports","module.exports = {"
"src\config\userConfig.js",1,"require(","const fs = require('fs');"
"src\config\userConfig.js",2,"require(","const path = require('path');"
"src\config\userConfig.js",67,"module.exports","module.exports = { getUserConfig, updateUserConfig, checkTranscriptionEnabled, initializeUserConfig };"
"src\database\DatabaseQueries.js",2,"require(","const SqliteManager = require(""./SqliteManager"");"
"src\database\DatabaseQueries.js",3,"require(","const { QueryTypes } = require(""sequelize"");"
"src\database\DatabaseQueries.js",118,"module.exports","module.exports = DatabaseQueries;"
"src\database\Informes\Agents_InsightInforme.js",6,"require(","const { execSync } = require('child_process');"
"src\database\Informes\Agents_InsightInforme.js",7,"require(","const path = require('path');"
"src\database\Informes\Agents_InsightInforme.js",8,"require(","const fs = require('fs');"
"src\database\Informes\generateMonthlyBotMessageReport.js",1,"require(","const fs = require(""fs"");"
"src\database\Informes\generateMonthlyBotMessageReport.js",2,"require(","const path = require(""path"");"
"src\database\Informes\generateMonthlyBotMessageReport.js",3,"require(","const SqliteManager = require(""../SqliteManager"");"
"src\database\Informes\generateMonthlyBotMessageReport.js",4,"require(","const { Op } = require(""sequelize"");"
"src\database\Informes\generateWeeklyBotMessageReport.js",1,"require(","const SqliteManager = require(""../SqliteManager"");"
"src\database\Informes\generateWeeklyBotMessageReport.js",2,"require(","const { Op } = require(""sequelize"");"
"src\database\Informes\generateWeeklyCodeChangeReport.js",1,"require(","const fs = require('fs');"
"src\database\Informes\generateWeeklyCodeChangeReport.js",2,"require(","const path = require('path');"
"src\database\Informes\generateWeeklyCodeChangeReport.js",3,"require(","const { execSync } = require('child_process');"
"src\database\Informes\generateWeeklyConversationLogReport.js",1,"require(","const fs = require(""fs"");"
"src\database\Informes\generateWeeklyConversationLogReport.js",2,"require(","const path = require(""path"");"
"src\database\Informes\generateWeeklyConversationLogReport.js",3,"require(","const { Parser } = require(""json2csv"");"
"src\database\Informes\generateWeeklyConversationLogReport.js",4,"require(","const SqliteManager = require(""../SqliteManager"");"
"src\database\Informes\generateWeeklyConversationLogReport.js",5,"require(","const { Sequelize } = require(""sequelize"");"
"src\database\loadData.js",2,"require(","const { init, query } = require('./db');"
"src\database\loadData.js",3,"require(","const blockedUsersData = require('../mensajes/blocked_users.json');"
"src\database\loadData.js",4,"require(","const userThreadsData = require('../mensajes/userThreads.json');"
"src\database\models\ConversationMetricas.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\ConversationsLog.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\CtxLogs.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\ExcepcionesHorario.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\Horarios.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\index.js",3,"require(","const fs = require('fs');"
"src\database\models\index.js",4,"require(","const path = require('path');"
"src\database\models\index.js",5,"require(","const Sequelize = require('sequelize');"
"src\database\models\index.js",6,"require(","const process = require('process');"
"src\database\models\index.js",9,"require(","const config = require(__dirname + '/../config/config.json')[env];"
"src\database\models\index.js",30,"require(","const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);"
"src\database\models\index.js",43,"module.exports","module.exports = db;"
"src\database\models\MensajeEstados.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\N8nMetric.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\Ofertas.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\Pedidos.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\Productos.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\ProviderLogs.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\ReglasHorario.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\models\Usuarios.js",1,"module.exports","module.exports = (sequelize, DataTypes) => {"
"src\database\scripts\conversations_log_Queries.js",40,"module.exports","module.exports = Conversations_log_Queries;"
"src\database\scripts\conversation_metricas_Queries.js",55,"module.exports","module.exports = Conversation_Metricas_Queries;"
"src\database\scripts\generateMonthlyBotMessageReport.js",1,"require(","const SqliteManager = require(""../SqliteManager"");"
"src\database\scripts\generateMonthlyBotMessageReport.js",2,"require(","const { Op, Sequelize } = require(""sequelize"");"
"src\database\scripts\generateWeeklyBotMessageReport.js",1,"require(","const SqliteManager = require(""../SqliteManager"");"
"src\database\scripts\generateWeeklyBotMessageReport.js",2,"require(","const { Op } = require(""sequelize"");"
"src\database\scripts\generateWeeklyBotMessageReportV2.js",1,"require(","const SqliteManager = require(""../SqliteManager"");"
"src\database\scripts\generateWeeklyBotMessageReportV2.js",2,"require(","const { Op, Sequelize } = require(""sequelize"");"
"src\database\scripts\getMensajesBulkEsteMes.js",1,"require(","const DatabaseQueries = require(""../DatabaseQueries.js"");"
"src\database\scripts\getMensajesBulkEsteMes.js",23,"module.exports","module.exports = { getMensajesBulkEsteMes };"
"src\database\scripts\seed.js",2,"require(","require('dotenv').config();"
"src\database\scripts\seed.js",3,"require(","const { seedHorarios } = require('../seeders/horariosSeeder');"
"src\database\scripts\seed.js",4,"require(","const SqliteManager = require('../SqliteManager');"
"src\database\scripts\seedConversationsLog.js",1,"require(","const SqliteManager = require(""../SqliteManager"");"
"src\database\scripts\sequelize.js",1,"require(","const { Sequelize } = require('sequelize');"
"src\database\scripts\sequelize.js",21,"module.exports","module.exports = sequelize;"
"src\database\scripts\temp_check_data.js",1,"require(","const SqliteManager = require('../SqliteManager');"
"src\database\scripts\temp_check_data.js",2,"require(","const { Op } = require('sequelize');"
"src\database\scripts\usuarios_Queries.js",49,"module.exports","module.exports = Usuarios_Queries;"
"src\database\seeders\horariosSeeder.js",2,"require(","const SqliteManager = require('../SqliteManager');"
"src\database\seeders\horariosSeeder.js",71,"module.exports","module.exports = { seedHorarios };"
"src\database\sequelize\models\index.js",3,"require(","const fs = require('fs');"
"src\database\sequelize\models\index.js",4,"require(","const path = require('path');"
"src\database\sequelize\models\index.js",5,"require(","const Sequelize = require('sequelize');"
"src\database\sequelize\models\index.js",6,"require(","const process = require('process');"
"src\database\sequelize\models\index.js",9,"require(","const config = require(__dirname + '/../config/config.json')[env];"
"src\database\sequelize\models\index.js",31,"require(","const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);"
"src\database\sequelize\models\index.js",44,"module.exports","module.exports = db;"
"src\database\SqliteManager.js",1,"require(","const { Sequelize, DataTypes, Op } = require(""sequelize"");"
"src\database\SqliteManager.js",2,"require(","const path = require(""path"");"
"src\database\SqliteManager.js",5,"require(","const ConversationsLogModel = require(""./models/ConversationsLog"");"
"src\database\SqliteManager.js",6,"require(","const ConversationMetricasModel = require(""./models/ConversationMetricas"");"
"src\database\SqliteManager.js",7,"require(","const MensajeEstadosModel = require(""./models/MensajeEstados"");"
"src\database\SqliteManager.js",8,"require(","const CtxLogsModel = require(""./models/CtxLogs"");"
"src\database\SqliteManager.js",9,"require(","const ProviderLogsModel = require(""./models/ProviderLogs"");"
"src\database\SqliteManager.js",10,"require(","const OfertasModel = require(""./models/Ofertas"");"
"src\database\SqliteManager.js",11,"require(","const PedidosModel = require(""./models/Pedidos"");"
"src\database\SqliteManager.js",12,"require(","const ProductosModel = require(""./models/Productos"");"
"src\database\SqliteManager.js",13,"require(","const UsuariosModel = require(""./models/Usuarios"");"
"src\database\SqliteManager.js",14,"require(","const HorariosModel = require(""./models/Horarios"");"
"src\database\SqliteManager.js",15,"require(","const ReglasHorarioModel = require(""./models/ReglasHorario"");"
"src\database\SqliteManager.js",16,"require(","const ExcepcionesHorarioModel = require(""./models/ExcepcionesHorario"");"
"src\database\SqliteManager.js",17,"require(","const N8nMetricModel = require(""./models/N8nMetric"");"
"src\database\SqliteManager.js",55,"require(","return require(""fs"").existsSync(p);"
"src\database\SqliteManager.js",529,"module.exports","module.exports = SqliteManager;"
"src\examples\HorarioExamples.js",1,"require(","const HorarioManagerService = require('../services/HorarioManagerService');"
"src\examples\HorarioExamples.js",201,"module.exports","module.exports = {"
"src\flows\flowAsistente.js",1,"require(","const { createBot, createProvider, createFlow, addKeyword, EVENTS } = require('@builderbot/bot')"
"src\flows\flowAsistente.js",2,"require(","const { getUserConfig, updateUserConfig } = require('../config/userConfig');"
"src\flows\flowAsistente.js",3,"require(","const { sendChunksWithDelay } = require('../utils/sendChunksWithDelay');"
"src\flows\flowAsistente.js",54,"module.exports","module.exports = flowAsistente;"
"src\flows\flowEnviarDeudas.js",1,"require(","const { addKeyword } = require('@builderbot/bot');"
"src\flows\flowEnviarDeudas.js",2,"require(","const sendBulkMessages = require('../../mensajes/sendBulkMessages');"
"src\flows\flowEnviarDeudas.js",3,"require(","const { isAdmin } = require('../utils/isAdmin');"
"src\flows\flowEnviarDeudas.js",4,"require(","const { sendChunksWithDelay } = require('../utils/sendChunksWithDelay');"
"src\flows\flowEnviarDeudas.js",5,"require(","const flowPrincipal = require('./flowPrincipal');"
"src\flows\flowEnviarDeudas.js",30,"module.exports","module.exports = flowEnviarDeudas;"
"src\flows\flowEnviarMensaje.js",1,"require(","const { addKeyword } = require('@builderbot/bot');"
"src\flows\flowEnviarMensaje.js",2,"require(","const sendBulkMessages = require('../../mensajes/sendBulkMessages');"
"src\flows\flowEnviarMensaje.js",3,"require(","const { isAdmin } = require('../utils/isAdmin');"
"src\flows\flowEnviarMensaje.js",4,"require(","const { sendChunksWithDelay } = require('../utils/sendChunksWithDelay');"
"src\flows\flowEnviarMensaje.js",5,"require(","//const flowPrincipal = require('./flowPrincipal');"
"src\flows\flowEnviarMensaje.js",6,"require(","const { botFileMapping } = require('../utils/botFileMapping');"
"src\flows\flowEnviarMensaje.js",38,"module.exports","module.exports = flowEnviarMensaje;"
"src\flows\flowFileUpdate.js",1,"require(","const { addKeyword, EVENTS } = require('@builderbot/bot');"
"src\flows\flowFileUpdate.js",2,"require(","const fs = require('fs');"
"src\flows\flowFileUpdate.js",3,"require(","const path = require('path');"
"src\flows\flowFileUpdate.js",4,"require(","const { botFileMapping } = require('../utils/botFileMapping.js');"
"src\flows\flowFileUpdate.js",5,"require(","const { downloadMediaMessage } = require(""@adiwajshing/baileys"");"
"src\flows\flowFileUpdate.js",6,"require(","const { writeMediaMessage } = require('../utils/readWriteMediaMessage.js');"
"src\flows\flowFileUpdate.js",78,"module.exports","module.exports = flowFileUpdate;"
"src\flows\flowMedia.js",1,"require(","const { handlerAI } = require(""../../mensajes/whisper.js"");"
"src\flows\flowMedia.js",2,"require(","const { addKeyword, EVENTS } = require('@builderbot/bot');"
"src\flows\flowMedia.js",3,"require(","const flowPrincipal = require('./flowPrincipal.js');"
"src\flows\flowMedia.js",4,"require(","const { sendChunksWithDelay } = require('../utils/sendChunksWithDelay.js');"
"src\flows\flowMedia.js",5,"require(","const OllamaFunnelClassifier = require('../../mensajes/OllamaFunnelClassifier');"
"src\flows\flowMedia.js",6,"require(","const { downloadMediaMessage } = require(""@builderbot/bot"");"
"src\flows\flowMedia.js",7,"require(","const { getUserConfig, checkTranscriptionEnabled } = require('../config/userConfig');"
"src\flows\flowMedia.js",8,"require(","const MessageData = require(""../utils/MessageData.js"");"
"src\flows\flowMedia.js",9,"require(","const { writeMediaMessage, readMediaFromContext } = require('../utils/readWriteMediaMessage.js');"
"src\flows\flowMedia.js",10,"require(","const OpenAI = require('openai');"
"src\flows\flowMedia.js",11,"require(","const N8nWebhookListener = require('../Logica/N8nWebhookListener');"
"src\flows\flowMedia.js",12,"require(","const fs = require('fs');"
"src\flows\flowMedia.js",205,"module.exports","module.exports = flowMedia;"
"src\flows\flowNotionAssistant.js",1,"require(","const { addKeyword } = require('@builderbot/bot');"
"src\flows\flowNotionAssistant.js",2,"require(","const sendBulkMessages = require('../utils/sendBulkMessages');"
"src\flows\flowNotionAssistant.js",3,"require(","const { isAdmin, getAdmin } = require('../utils/isAdmin');"
"src\flows\flowNotionAssistant.js",4,"require(","const { sendChunksWithDelay } = require('../utils/sendChunksWithDelay');"
"src\flows\flowNotionAssistant.js",5,"require(","const { chatWithAssistant, getOrCreateThread } = require('../../mensajes/Assistant');"
"src\flows\flowNotionAssistant.js",6,"require(","const { run, executeNotionAssistant, chatWithAnythingllm } = require('../../mensajes/logica');"
"src\flows\flowNotionAssistant.js",23,"module.exports","module.exports = flowNotionAssistant;"
"src\flows\flowOperador.js",1,"require(","const { addKeyword } = require('@builderbot/bot');"
"src\flows\flowOperador.js",2,"require(","const { isUserBlocked, saveBlockedUsers, blockUser, unblockUser  } = require('../../src/utils/userBlockManager');"
"src\flows\flowOperador.js",3,"require(","const { updateUserConfig } = require('../config/userConfig');"
"src\flows\flowOperador.js",4,"require(","const { sendChunksWithDelay } = require('../utils/sendChunksWithDelay');"
"src\flows\flowOperador.js",6,"require(","const flowPrincipal = require('./flowPrincipal');"
"src\flows\flowOperador.js",46,"module.exports","module.exports = {flowDesactivar,flowActivar};"
"src\flows\flowPrincipal.js",1,"require(","const { addKeyword, EVENTS } = require(""@builderbot/bot"");"
"src\flows\flowPrincipal.js",4,"require(","} = require(""../../mensajes/services/customerClassification"");"
"src\flows\flowPrincipal.js",5,"require(","const { logMessage } = require(""../utils/messageLogger"");"
"src\flows\flowPrincipal.js",6,"require(","const { isWithinRestrictedHours } = require(""../utils/timeRestrictions""); // This now uses BotConfigManager"
"src\flows\flowPrincipal.js",7,"require(","const { handleUserMessageCount } = require(""../../src/utils/messageCounter"");"
"src\flows\flowPrincipal.js",8,"require(","const { processMessage } = require(""../../src/utils/messageProcessor"");"
"src\flows\flowPrincipal.js",9,"require(","const { isUserBlocked } = require(""../../src/utils/userBlockManager"");"
"src\flows\flowPrincipal.js",10,"require(","const MessageData = require(""../utils/MessageData"");"
"src\flows\flowPrincipal.js",11,"require(","const { getBotFilePath } = require(""../utils/botFileMapping""); // Import the new function"
"src\flows\flowPrincipal.js",12,"require(","const sendBulkMessages = require(""../../mensajes/sendBulkMessages""); // Keep this import"
"src\flows\flowPrincipal.js",13,"require(","const n8nClassifier = require(""../../src/Logica/n8nClassifier"");"
"src\flows\flowPrincipal.js",14,"require(","const loadChatHistory = require(""../utils/getHistoryFromProvider"");"
"src\flows\flowPrincipal.js",15,"require(","const aggregateChatHistory = require(""../utils/chatHistoryAggregator"");"
"src\flows\flowPrincipal.js",16,"require(","const { logCtx } = require(""../utils/ctxLog"");"
"src\flows\flowPrincipal.js",21,"require(","} = require(""../utils/providerLog"");"
"src\flows\flowPrincipal.js",24,"require(","} = require(""../config/botConfigManager""); // Import config manager"
"src\flows\flowPrincipal.js",32,"require(","} = require(""../utils/mediaChecker""); // Import media checker"
"src\flows\flowPrincipal.js",33,"require(","const { voiceMediaManager } = require(""../utils/voiceMediaManager"");"
"src\flows\flowPrincipal.js",34,"require(","const BulkMessageManager = require(""../bulk/bulkMessageManager""); // Importar el BulkMessageManager"
"src\flows\flowPrincipal.js",35,"require(","const HorarioManagerService = require(""../services/HorarioManagerService"");"
"src\flows\flowPrincipal.js",162,"module.exports","module.exports = flowPrincipal;"
"src\flows\flowTest.js",1,"require(","const { addKeyword } = require('@builderbot/bot');"
"src\flows\flowTest.js",2,"require(","const HorarioManagerService = require('../services/HorarioManagerService');"
"src\flows\flowTest.js",3,"require(","const MessageStatusChecker = require('../bulk/MessageStatusChecker');"
"src\flows\flowTest.js",103,"module.exports","module.exports = flowTest;"
"src\flows\flowUpdateVectorStore.js",1,"require(","const { addKeyword } = require('@builderbot/bot');"
"src\flows\flowUpdateVectorStore.js",2,"require(","const path = require('path');"
"src\flows\flowUpdateVectorStore.js",3,"require(","const fs = require('fs');"
"src\flows\flowUpdateVectorStore.js",4,"require(","const fsPromises = require('fs').promises;"
"src\flows\flowUpdateVectorStore.js",5,"require(","//const { chatWithAssistant } = require('./mensajes/Assistant.js');"
"src\flows\flowUpdateVectorStore.js",6,"require(","const { OpenAI } = require('openai');"
"src\flows\flowUpdateVectorStore.js",123,"module.exports","module.exports = flowUpdateVectorStore;"
"src\flows\flowVoice.js",1,"require(","const { handlerAI } = require(""../../mensajes/whisper.js"")"
"src\flows\flowVoice.js",2,"require(","const { addKeyword, EVENTS } = require('@builderbot/bot');"
"src\flows\flowVoice.js",3,"require(","const flowPrincipal = require('./flowPrincipal');"
"src\flows\flowVoice.js",4,"require(","const { sendChunksWithDelay } = require('../utils/sendChunksWithDelay');"
"src\flows\flowVoice.js",5,"require(","const { getUserConfig, checkTranscriptionEnabled } = require('../config/userConfig');"
"src\flows\flowVoice.js",33,"module.exports","module.exports = flowVoice;"
"src\Logica\AnythingLLM.js",1,"require(","const axios = require('axios');"
"src\Logica\configuracion-swarm.js",1,"require(","const { Swarm, Agent } = require('openai-swarm-node');"
"src\Logica\configuracion-swarm.js",2,"require(","require('dotenv').config();"
"src\Logica\n8nClassifier.js",1,"require(","const ExcelJS = require('exceljs');"
"src\Logica\n8nClassifier.js",2,"require(","const OllamaFunnelClassifier = require('../../mensajes/OllamaFunnelClassifier');"
"src\Logica\n8nClassifier.js",3,"require(","const { getClientHistory } = require('../utils/clientHistoryFromExcel');"
"src\Logica\n8nClassifier.js",4,"require(","const N8nWebhookListener = require('./N8nWebhookListener');"
"src\Logica\n8nClassifier.js",197,"module.exports","module.exports = N8nClassifier;"
"src\Logica\N8nWebhookListener.js",1,"require(","const axios = require('axios');"
"src\Logica\N8nWebhookListener.js",37,"module.exports","module.exports = N8nWebhookListener;"
"src\Logica\N8nWebhookListenerAuth.js",1,"require(","const axios = require('axios');"
"src\Logica\N8nWebhookListenerAuth.js",42,"module.exports","module.exports = N8nWebhookListener;"
"src\Logica\NotionWorkspaceAssistant.js",1,"require(","//const fetch = require('node-fetch');"
"src\Logica\NotionWorkspaceAssistant.js",125,"module.exports","module.exports = { NotionWorkspaceAssistant };"
"src\Logica\salesFunnelClassifier.js",1,"require(","const { OpenAI } = require('openai');"
"src\Logica\salesFunnelClassifier.js",25,"module.exports","module.exports = SalesFunnelClassifier;"
"src\Logica\swarmAgents.js",1,"require(","const {Swarm} = require(""openai-swarm-node"");"
"src\routes\scheduleRoutes.js",1,"require(","const express = require('express');"
"src\routes\scheduleRoutes.js",3,"require(","const SqliteManager = require('../database/SqliteManager');"
"src\routes\scheduleRoutes.js",300,"module.exports","module.exports = router;"
"src\scripts\createBotExcelConfig.js",7,"require(","const XLSX = require('xlsx');"
"src\scripts\createBotExcelConfig.js",111,"module.exports","module.exports = { createBotConfigExcel }; // Use CommonJS export syntax"
"src\scripts\generateDbReport.js",1,"require(","const fs = require('fs');"
"src\scripts\generateDbReport.js",2,"require(","const path = require('path');"
"src\scripts\generateDbReport.js",3,"require(","const { Sequelize } = require('sequelize');"
"src\scripts\generateDbReport.js",22,"require(","const modelDefinition = require(path.join(modelsDir, file));"
"src\scripts\refreshAllExcel.js",1,"require(","const { exec } = require('child_process');"
"src\scripts\refreshAllExcel.js",2,"require(","const ExcelJS = require('exceljs');"
"src\scripts\refreshAllExcel.js",3,"require(","//const XLSX = require('xlsx');"
"src\scripts\refreshAllExcel.js",4,"require(","const xlsx = require('node-xlsx');"
"src\scripts\refreshAllExcel.js",5,"require(","const path = require('path'); // Import the path module"
"src\scripts\refreshAllExcel.js",7,"require(","//const config = require('../config/config.json');"
"src\scripts\refreshAllExcel.js",58,"module.exports","module.exports = { runMacro }; // Export the function"
"src\scripts\testProviderVendor.js",1,"require(","const MessageStatusChecker = require(""../bulk/MessageStatusChecker"");"
"src\scripts\testProviderVendor.js",73,"module.exports","module.exports = { testProviderVendor }; // Export the function"
"src\services\HorarioManagerService.js",1,"require(","const SqliteManager = require('../database/SqliteManager');"
"src\services\HorarioManagerService.js",2,"require(","//const PostgreSQLManager = require('../database/PostgreSQLManager');"
"src\services\HorarioManagerService.js",135,"module.exports","module.exports = HorarioManagerService;"
"src\services\initServices.js",2,"require(","const express = require('express');"
"src\services\initServices.js",3,"require(","const axios = require('axios');"
"src\services\initServices.js",4,"require(","const BackupManager = require('../utils/backupManager');"
"src\services\initServices.js",5,"require(","const { spawn } = require('child_process');"
"src\services\initServices.js",6,"require(","//const PostgreSQLManager = require('../database/PostgreSQLManager');"
"src\services\initServices.js",7,"require(","const SqliteManager = require('../database/SqliteManager');"
"src\services\initServices.js",8,"require(","const WebServerService = require('./webServerService'); // 1. Importar el servicio"
"src\services\initServices.js",174,"module.exports","module.exports = { initializeServices, closeAllServices };"
"src\services\webServerService.js",1,"require(","const express = require('express');"
"src\services\webServerService.js",2,"require(","const path = require('path');"
"src\services\webServerService.js",3,"require(","const ejs = require('ejs');"
"src\services\webServerService.js",4,"require(","const scheduleRoutes = require('../routes/scheduleRoutes'); // Importar las nuevas rutas"
"src\services\webServerService.js",39,"module.exports","module.exports = WebServerService;"
"src\utils\backupManager.js",1,"require(","const path = require('path');"
"src\utils\backupManager.js",2,"require(","const fs = require('fs');"
"src\utils\backupManager.js",3,"require(","const archiver = require('archiver');"
"src\utils\backupManager.js",4,"require(","const { parse } = require('json2csv');"
"src\utils\backupManager.js",5,"require(","const iconv = require('iconv-lite');"
"src\utils\backupManager.js",76,"module.exports","module.exports = BackupManager;"
"src\utils\botFileMapping.js",1,"require(","const { getInstance } = require('../config/botConfigManager');"
"src\utils\botFileMapping.js",25,"module.exports","module.exports = {"
"src\utils\chatHistoryAggregator.js",1,"require(","const fs = require('fs');"
"src\utils\chatHistoryAggregator.js",2,"require(","const path = require('path');"
"src\utils\chatHistoryAggregator.js",3,"require(","const { getHistoryConversation_log } = require('./clientHistoryFromJson');"
"src\utils\chatHistoryAggregator.js",4,"require(","const getHistoryFromProvider = require('../utils/getHistoryFromProvider');"
"src\utils\chatHistoryAggregator.js",209,"module.exports","module.exports = aggregateChatHistory;"
"src\utils\clientHistoryFromExcel.js",1,"require(","const fs = require('fs').promises;"
"src\utils\clientHistoryFromExcel.js",38,"module.exports","module.exports = { getClientHistory };"
"src\utils\clientHistoryFromJson.js",1,"require(","const fs = require('fs').promises;"
"src\utils\clientHistoryFromJson.js",39,"module.exports","module.exports = { getHistoryConversation_log };"
"src\utils\ctxLog.js",3,"require(","const fs = require('fs');"
"src\utils\ctxLog.js",4,"require(","const path = require('path');"
"src\utils\ctxLog.js",51,"module.exports","module.exports = { logCtx };"
"src\utils\getBulkMessageStats.js",1,"require(","const fs = require('fs');"
"src\utils\getBulkMessageStats.js",2,"require(","const path = require('path');"
"src\utils\getBulkMessageStats.js",35,"module.exports","module.exports = { getDailyBulkMessageStats };"
"src\utils\getHistoryFromProvider.js",63,"module.exports","module.exports = getHistoryFromProvider"
"src\utils\isAdmin.js",12,"module.exports","module.exports = { isAdmin, getAdmin };"
"src\utils\logger.js",68,"module.exports","module.exports = { logger };"
"src\utils\mediaChecker.js",89,"module.exports","module.exports = {"
"src\utils\mediaHandler.js",1,"require(","const { downloadMediaMessage } = require(""@builderbot/bot"");"
"src\utils\mediaHandler.js",2,"require(","const { checkTranscriptionEnabled } = require('../config/userConfig');"
"src\utils\mediaHandler.js",3,"require(","const { writeMediaMessage } = require('./readWriteMediaMessage.js');"
"src\utils\mediaHandler.js",4,"require(","const OpenAI = require('openai');"
"src\utils\mediaHandler.js",5,"require(","const N8nWebhookListener = require('../Logica/N8nWebhookListener');"
"src\utils\mediaHandler.js",6,"require(","const fs = require('fs');"
"src\utils\mediaHandler.js",196,"module.exports","module.exports = {"
"src\utils\messageCounter.js",11,"module.exports","module.exports = { handleUserMessageCount };"
"src\utils\MessageData.js",1,"require(","const { downloadMediaMessage } = require(""@builderbot/bot"");"
"src\utils\MessageData.js",5,"require(","} = require('./readWriteMediaMessage');"
"src\utils\MessageData.js",6,"require(","const fs = require('fs');"
"src\utils\MessageData.js",7,"require(","const path = require('path');"
"src\utils\MessageData.js",205,"module.exports","module.exports = MessageData;"
"src\utils\messageLogger.js",1,"require(","const fs = require(""fs"");"
"src\utils\messageLogger.js",2,"require(","const path = require(""path"");"
"src\utils\messageLogger.js",3,"require(","//const PostgreSQLManager = require(""../database/PostgreSQLManager"");"
"src\utils\messageLogger.js",4,"require(","const SqliteManager = require(""../database/SqliteManager"");"
"src\utils\messageLogger.js",5,"require(","const MessageData = require(""./MessageData"");"
"src\utils\messageLogger.js",172,"module.exports","module.exports = { logMessage };"
"src\utils\messageProcessor.js",1,"require(","const fs = require(""fs"");"
"src\utils\messageProcessor.js",2,"require(","const path = require(""path"");"
"src\utils\messageProcessor.js",3,"require(","const { logicaMensajes } = require(""../../mensajes/logica"");"
"src\utils\messageProcessor.js",4,"require(","const { sendChunksWithDelay } = require(""../utils/sendChunksWithDelay"");"
"src\utils\messageProcessor.js",5,"require(","const MessageData = require(""../utils/MessageData"");"
"src\utils\messageProcessor.js",6,"require(","const N8nWebhookListener = require(""../Logica/N8nWebhookListener"");"
"src\utils\messageProcessor.js",7,"require(","const { isWithinRestrictedHours } = require(""../utils/timeRestrictions"");"
"src\utils\messageProcessor.js",8,"require(","const botConfig = require(""../config/botConfigManager""); // Import botConfig"
"src\utils\messageProcessor.js",9,"require(","const { isAdmin, getAdmin } = require(""./../utils/isAdmin"");"
"src\utils\messageProcessor.js",10,"require(","const HorarioManagerService = require(""../services/HorarioManagerService"");"
"src\utils\messageProcessor.js",11,"require(","const SqliteManager = require(""../database/SqliteManager"");"
"src\utils\messageProcessor.js",12,"require(","const DatabaseQueries = require(""../database/DatabaseQueries"");"
"src\utils\messageProcessor.js",169,"module.exports","module.exports = { processMessage };"
"src\utils\prepareSQLiteFromCSVXLSX.js",1,"require(","const fs = require('fs');"
"src\utils\prepareSQLiteFromCSVXLSX.js",2,"require(","const path = require('path');"
"src\utils\prepareSQLiteFromCSVXLSX.js",3,"require(","const sqlite3 = require('sqlite3').verbose();"
"src\utils\prepareSQLiteFromCSVXLSX.js",4,"require(","const csv = require('csv-parser');"
"src\utils\prepareSQLiteFromCSVXLSX.js",5,"require(","const xlsx = require('xlsx');"
"src\utils\prepareSQLiteFromCSVXLSX.js",97,"module.exports","module.exports = PrepareSQLFromTabularData;"
"src\utils\providerLog.js",1,"require(","const fs = require('fs');"
"src\utils\providerLog.js",2,"require(","const path = require('path');"
"src\utils\providerLog.js",3,"require(","const getHistoryFromProvider = require('../utils/getHistoryFromProvider');"
"src\utils\providerLog.js",98,"module.exports","module.exports = { logProvider, saveLastProvider, logMessageProvider };"
"src\utils\readWriteMediaMessage.js",1,"require(","const { downloadMediaMessage } = require(""@builderbot/bot"");"
"src\utils\readWriteMediaMessage.js",2,"require(","const fs = require('fs');"
"src\utils\readWriteMediaMessage.js",91,"module.exports","module.exports = {"
"src\utils\sendChunksWithDelay.js",1,"require(","const fs = require(""fs"").promises;"
"src\utils\sendChunksWithDelay.js",3,"require(","const path = require(""path"");"
"src\utils\sendChunksWithDelay.js",4,"require(","const { logMessage } = require(""./messageLogger"");"
"src\utils\sendChunksWithDelay.js",5,"require(","const { isUserBlocked, saveBlockedUsers } = require(""./userBlockManager"");"
"src\utils\sendChunksWithDelay.js",6,"require(","const MessageData = require(""./MessageData"");"
"src\utils\sendChunksWithDelay.js",64,"module.exports","module.exports = { sendChunksWithDelay, logMessage };"
"src\utils\timeRestrictions.js",1,"require(","const { getInstance } = require('../config/botConfigManager');"
"src\utils\timeRestrictions.js",28,"module.exports","module.exports = {"
"src\utils\userBlockManager.js",1,"require(","const fs = require('fs').promises;"
"src\utils\userBlockManager.js",2,"require(","const path = require('path');"
"src\utils\userBlockManager.js",43,"module.exports","module.exports = {"
"src\utils\voiceHandler.js",1,"require(","const { handlerAI } = require(""../../mensajes/whisper.js"");"
"src\utils\voiceHandler.js",2,"require(","const { checkTranscriptionEnabled } = require('../config/userConfig');"
"src\utils\voiceHandler.js",43,"module.exports","module.exports = {"
"src\utils\voiceMediaManager.js",1,"require(","const { handleMediaProcessing } = require(""./mediaHandler"");"
"src\utils\voiceMediaManager.js",2,"require(","const { handleVoiceTranscription } = require(""./voiceHandler"");"
"src\utils\voiceMediaManager.js",289,"module.exports","module.exports = {"